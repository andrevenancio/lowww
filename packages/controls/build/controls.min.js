/*
lowww-controls - version: 1.1.3
Copyright Â© 2018 Andre Venancio (info@andrevenancio.com)
*/
var t;t=function(t){"use strict";var o="undefined"!=typeof Float32Array?Float32Array:Array;function e(){var t=new o(3);return t[0]=0,t[1]=0,t[2]=0,t}function n(t,e,n){var i=new o(3);return i[0]=t,i[1]=e,i[2]=n,i}Math.PI;var i;function s(){var t=new o(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}e(),(i=new o(4))[0]=0,i[1]=0,i[2]=0,i[3]=0;var r,h;function a(t,e,n){return Math.max(Math.min(t,n),e)}e(),n(1,0,0),n(0,1,0),s(),s(),(r=new o(9))[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,(h=new o(2))[0]=0,h[1]=0;var d=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},u=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),m=.5*-Math.PI,c=function(){function n(t,e){var r=this;d(this,n),this.onStart=function(t){t.preventDefault(),r.oy=r.ry,r.ox=r.rx,r.startY=t.pageX/r.width,r.startX=t.pageY/r.height,r.isDown=!0},this.onMove=function(t){if(r.isDown){var e=t.pageX/r.width,n=t.pageY/r.height;if(r.rx=r.ox+-(r.startX-n)*r.rotationSpeed,r.ry=r.oy+(r.startY-e)*r.rotationSpeed,r.rx=a(r.rx,.5*-Math.PI,.5*Math.PI),t.touches&&1<t.changedTouches.length){var i=t.changedTouches[0],o=t.changedTouches[1];r.curDiff=r.pinchMode(i.clientX,i.clientY,o.clientX,o.clientY);var s;s=r.curDiff>r.oldDiff?-100:100,r.zoom(s),r.oldDiff=r.curDiff}}},this.onEnd=function(){r.isDown=!1,r.oldDiff=-1},this.onWheel=function(t){t.preventDefault(),r.zoom(-t.deltaY)},this.camera=t,this.domElement=e,this.radius=Math.max(t.position.x,t.position.z),this.rx=Math.atan2(t.position.y,this.radius),this.ry=Math.atan2(t.position.z,t.position.x)+m,this.ox=0,this.oy=0,this.width=window.innerWidth,this.height=window.innerHeight,this.rotationSpeed=5*window.devicePixelRatio,this.zoomMin=.1,this.zoomMax=1/0,this.zoomSpeed=100,this.isDown=!1,this.curDiff=0,this.oldDiff=-1,this.enable()}return u(n,[{key:"enable",value:function(){this.domElement.addEventListener("mousedown",this.onStart,!1),this.domElement.addEventListener("mousemove",this.onMove,!1),this.domElement.addEventListener("mouseup",this.onEnd,!1),this.domElement.addEventListener("touchstart",this.onStart,!1),this.domElement.addEventListener("touchmove",this.onMove,!1),this.domElement.addEventListener("touchend",this.onEnd,!1),this.domElement.addEventListener("wheel",this.onWheel,!1)}},{key:"disable",value:function(){this.domElement.removeEventListener("mousedown",this.onStart,!1),this.domElement.removeEventListener("mousemove",this.onMove,!1),this.domElement.removeEventListener("mouseup",this.onEnd,!1),this.domElement.removeEventListener("touchstart",this.onStart,!1),this.domElement.removeEventListener("touchmove",this.onMove,!1),this.domElement.removeEventListener("touchend",this.onEnd,!1),this.domElement.removeEventListener("wheel",this.onWheel,!1)}},{key:"pinchMode",value:function(t,e,n,i){return Math.sqrt((t-n)*(t-n)+(e-i)*(e-i))}},{key:"zoom",value:function(t){this.radius+=t/1e3*this.zoomSpeed,this.radius=a(this.radius,this.zoomMin,this.zoomMax)}},{key:"update",value:function(){var t,e,n,i,o=this.radius*Math.sin(this.rx),s=this.radius*Math.cos(this.rx);e=Math.sin(this.ry)*s,n=o,i=Math.cos(this.ry)*s,(t=this.camera.position.data)[0]=e,t[1]=n,t[2]=i}}]),n}();t.Orbit=c,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((this.lowww=this.lowww||{},this.lowww.controls={}));
